# AI Career Assistant - 功能需求文檔

## 1. 概述

本文檔使用 EARS (Event-Action-Response-Stimulus) 格式定義 AI Career Assistant 的功能與非功能性需求。

## 2. 功能性需求 (EARS 格式)

### 2.1 履歷收集與分析

**REQ-001: 履歷文件上傳**
- **Event**: 當用戶上傳履歷文件時
- **Action**: 系統應解析文件內容（PDF、DOC、DOCX）
- **Response**: 提取結構化資料並顯示預覽
- **Stimulus**: 上傳完成後 3 秒內

**REQ-002: 履歷內容驗證**
- **Event**: 當履歷解析完成時
- **Action**: 系統應驗證必要欄位完整性
- **Response**: 標示缺失或需補充的資訊
- **Stimulus**: 解析完成即時觸發

**REQ-003: 敏感資訊檢測**
- **Event**: 當偵測到就業空白期、創傷經歷時
- **Action**: 系統應以同理心方式詢問
- **Response**: 提供選擇性回答機制，不強制填寫
- **Stimulus**: 內容分析階段自動觸發

### 2.2 AI 諮詢對話

**REQ-004: 智能對話管理**
- **Event**: 當用戶提出職涯問題時
- **Action**: Gemini Multi-Agent 應分析問題類型
- **Response**: 路由至合適的專業 Agent 處理
- **Stimulus**: 訊息發送後 2 秒內開始處理

**REQ-005: 上下文記憶**
- **Event**: 當對話進行超過 10 輪時
- **Action**: 系統應維護完整對話歷史
- **Response**: 確保回答具一致性與連貫性
- **Stimulus**: 每次對話輪次觸發

**REQ-006: 情感智能回應**
- **Event**: 當偵測到用戶情緒波動時
- **Action**: 系統應調整語調與建議策略
- **Response**: 提供情感支持與實用建議
- **Stimulus**: 情緒分析結果可用時

### 2.3 工作流程自動化

**REQ-007: n8n 工作流觸發**
- **Event**: 當用戶要求生成特定文件時
- **Action**: 系統應啟動對應的 n8n 工作流
- **Response**: 返回處理狀態與預估完成時間
- **Stimulus**: 用戶確認後立即執行

**REQ-008: 模板客製化**
- **Event**: 當生成履歷或求職信時
- **Action**: 系統應根據目標職位調整內容
- **Response**: 提供個人化的文件版本
- **Stimulus**: 職位資訊輸入完成後

### 2.4 資料管理

**REQ-009: 資料持久化**
- **Event**: 當用戶資料異動時
- **Action**: 系統應安全儲存至資料庫
- **Response**: 確認儲存成功並提供版本控制
- **Stimulus**: 資料變更後 1 秒內

**REQ-010: 隱私保護**
- **Event**: 當處理敏感個人資料時
- **Action**: 系統應遵循 GDPR 規範
- **Response**: 提供資料匿名化與刪除機制
- **Stimulus**: 資料處理開始前

## 3. 非功能性需求

### 3.1 性能需求

**NFR-001: 回應時間**
- AI 對話回應：< 3 秒（95% 的情況）
- 履歷解析：< 10 秒（檔案大小 < 5MB）
- n8n 工作流：< 30 秒（簡單模板生成）

**NFR-002: 併發處理**
- 支援至少 100 個同時在線用戶
- API 請求處理能力：1000 requests/minute
- 資料庫查詢：< 500ms（99% 的情況）

**NFR-003: 可用性**
- 系統可用性：99.9%（每月停機時間 < 43 分鐘）
- 故障恢復時間：< 5 分鐘
- 資料備份：每日自動備份

### 3.2 安全需求

**NFR-004: 資料加密**
- 傳輸加密：TLS 1.3
- 儲存加密：AES-256
- API 驗證：JWT + refresh token

**NFR-005: 存取控制**
- 用戶身份驗證：OAuth 2.0
- 角色權限管理：RBAC 模型
- API 速率限制：per-user 與 global 限制

**NFR-006: 隱私合規**
- GDPR 合規：資料可攜權、被遺忘權
- 資料最小化原則
- 審計日誌：保留 90 天

### 3.3 可擴展性需求

**NFR-007: 水平擴展**
- 微服務架構支援獨立擴展
- 容器化部署（Docker + Kubernetes）
- 負載均衡與自動擴展

**NFR-008: 模組化設計**
- 履歷收集模組可獨立移除/替換
- n8n 工作流可熱部署
- Agent 可動態註冊/註銷

### 3.4 維護性需求

**NFR-009: 監控與日誌**
- 應用性能監控（APM）
- 結構化日誌（JSON 格式）
- 告警機制：錯誤率 > 1%、回應時間 > 5s

**NFR-010: 測試覆蓋率**
- 單元測試覆蓋率：> 80%
- 整合測試：核心 API 100% 覆蓋
- E2E 測試：主要用戶流程覆蓋

## 4. 用戶故事與驗收標準

### 4.1 求職者用戶故事

**US-001: 作為求職者，我想要上傳履歷並獲得改善建議**
- **Given**: 我有一份現有履歷
- **When**: 我上傳履歷文件
- **Then**: 系統分析內容並提供具體改善建議
- **驗收標準**:
  - 支援 PDF、DOC、DOCX 格式
  - 解析準確率 > 95%
  - 提供至少 3 個改善建議

**US-002: 作為求職者，我想要獲得面試準備指導**
- **Given**: 我有特定目標職位
- **When**: 我請求面試準備建議
- **Then**: 系統提供客製化的面試指南
- **驗收標準**:
  - 包含常見問題與建議答案
  - 根據職位特性調整內容
  - 提供練習機會

**US-003: 作為求職者，我想要安全地處理敏感職涯話題**
- **Given**: 我有就業空白期或創傷經歷
- **When**: 我與 AI 討論這些話題
- **Then**: 系統以同理心方式回應，不強制揭露
- **驗收標準**:
  - 偵測敏感話題準確率 > 90%
  - 提供選擇性回答機制
  - 不儲存未授權的敏感資訊

### 4.2 系統管理員用戶故事

**US-004: 作為管理員，我想要監控系統性能**
- **Given**: 系統正在運行
- **When**: 我查看監控儀表板
- **Then**: 我能看到即時性能指標
- **驗收標準**:
  - 顯示回應時間、錯誤率、用戶數
  - 提供告警機制
  - 支援歷史數據查詢

## 5. 整合需求

### 5.1 n8n 整合

- 支援動態工作流創建與執行
- 提供 webhook 觸發機制
- 支援參數化模板生成

### 5.2 Gemini Multi-Agent 整合

- Agent 註冊與發現機制
- 智能路由與負載均衡
- 統一的對話管理介面

### 5.3 第三方整合

- LinkedIn API（職位搜尋）
- Indeed API（市場趨勢）
- PDF.js（文件解析）

## 6. 約束條件

### 6.1 技術約束

- 必須使用 Node.js 生態系統
- 支援 Windows 與 Linux 部署
- 相容主流瀏覽器（Chrome、Firefox、Safari、Edge）

### 6.2 法規約束

- GDPR 合規要求
- 個資法遵循
- 無障礙標準（WCAG 2.1 AA）

### 6.3 營運約束

- 初期預算限制：$10,000/月
- 開發時程：6 個月 MVP
- 團隊規模：3-5 人

## 7. 驗證矩陣

| 需求 ID | 驗證方法 | 測試類型 | 責任人 |
|---------|----------|----------|---------|
| REQ-001 | 自動化測試 | 整合測試 | QA Engineer |
| REQ-004 | 用戶測試 | 可用性測試 | UX Designer |
| NFR-001 | 性能測試 | 負載測試 | DevOps Engineer |
| NFR-004 | 安全掃描 | 安全測試 | Security Specialist |

## 8. 風險評估

### 8.1 技術風險

- **高風險**: Gemini API 可用性與配額限制
- **中風險**: n8n 工作流複雜度管理
- **低風險**: 資料庫性能瓶頸

### 8.2 營運風險

- **高風險**: 用戶隱私資料外洩
- **中風險**: 第三方 API 依賴
- **低風險**: 功能範圍蔓延

---
**文檔版本**: v1.0  
**最後更新**: 2025-01-15  
**核准人**: Product Owner  
**下次審查**: 2025-02-15